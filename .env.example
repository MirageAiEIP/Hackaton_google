# ============================================
# SAMU AI Triage - Environment Configuration
# ============================================

# Application
NODE_ENV=development  # development | staging | production
PORT=8000
LOG_LEVEL=info

# ============================================
# CORS Configuration
# ============================================
# Development: Automatically allows localhost on common ports (3000, 5173, 8000, etc.)
# Staging/Production: Comma-separated list of allowed origins (REQUIRED)
# Example: ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com,https://admin.yourdomain.com
ALLOWED_ORIGINS=

# ============================================
# Google Cloud Platform Configuration
# ============================================

# Project ID (get from GCP Console)
GCP_PROJECT_ID=your-project-id

# Service Account credentials file path (relative to project root)
GOOGLE_APPLICATION_CREDENTIALS=./config/your-service-account.json

# GCS bucket name for audio file storage
GCS_BUCKET_NAME=your-bucket-name

# ============================================
# Secret Manager Configuration
# ============================================

# Use Google Secret Manager for sensitive credentials
# Set to 'true' to fetch secrets from Google Secret Manager (RECOMMENDED)
# Set to 'false' only for local development without GCP access
USE_SECRET_MANAGER=true

# ============================================
# IMPORTANT: All sensitive credentials are stored in Google Secret Manager
# ============================================
#
# The following secrets are managed in Secret Manager with environment prefixes:
#
# REQUIRED SECRETS (12 total):
# - {env}-google-api-key              (Gemini API for AI triage)
# - {env}-elevenlabs-api-key          (ElevenLabs TTS/STT/VAD)
# - {env}-elevenlabs-agent-id         (ElevenLabs conversational agent ID)
# - {env}-jwt-secret                  (Legacy JWT secret, keep for compatibility)
# - {env}-jwt-access-secret           (Access token signing key - 48+ chars)
# - {env}-jwt-refresh-secret          (Refresh token signing key - 48+ chars)
# - {env}-encryption-key              (Data encryption - 32 chars for AES-256)
# - {env}-database-url                (PostgreSQL connection string)
# - {env}-redis-url                   (Redis connection string)
# - {env}-twilio-account-sid          (Twilio account SID - ACxxxx)
# - {env}-twilio-auth-token           (Twilio auth token)
# - {env}-twilio-phone-number         (Twilio phone number - +33xxx)
#
# Environment prefixes: {env} = dev | staging | production
# - NODE_ENV=development → uses dev-* secrets
# - NODE_ENV=staging → uses staging-* secrets
# - NODE_ENV=production → uses production-* secrets
#
# Commands:
# - View secrets: https://console.cloud.google.com/security/secret-manager
# - Test secrets: npm run secrets:test
# - Generate keys: openssl rand -base64 48 (JWT) or openssl rand -hex 32 (encryption)
#
# Documentation: See SECRETS_CHECKLIST.md
#
# ============================================

# ============================================
# Twilio Configuration (Development Only)
# ============================================
# PRODUCTION/STAGING: These are loaded from Secret Manager
# DEVELOPMENT ONLY: Can be set here if USE_SECRET_MANAGER=false
# Get these from: https://console.twilio.com
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_PHONE_NUMBER=+1xxxxxxxxxx

# ============================================
# ElevenLabs Configuration (Development Only)
# ============================================
# PRODUCTION/STAGING: These are loaded from Secret Manager
# DEVELOPMENT ONLY: Can be set here if USE_SECRET_MANAGER=false
# Get these from: https://elevenlabs.io/app/conversational-ai
ELEVENLABS_API_KEY=sk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
ELEVENLABS_AGENT_ID=agent_xxxxxxxxxxxxxxxxxxxxxxxx

# ============================================
# Redis Configuration (Development Only)
# ============================================
# PRODUCTION/STAGING: Loaded from Secret Manager
# DEVELOPMENT ONLY: Can be set here if USE_SECRET_MANAGER=false
REDIS_URL=redis://localhost:6379

# ============================================
# AI & Database (Development Only)
# ============================================
# PRODUCTION/STAGING: These are loaded from Secret Manager
# DEVELOPMENT ONLY: Can be set here if USE_SECRET_MANAGER=false
GOOGLE_API_KEY=AIzaxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
DATABASE_URL=postgresql://samu:password@localhost:5432/samu_triage
JWT_SECRET=your_jwt_secret_minimum_32_characters_required
ENCRYPTION_KEY=your_encryption_key_exactly_32_chars

# ============================================
# JWT Authentication
# ============================================
# Access token expiration (e.g., 15m, 1h)
JWT_ACCESS_TOKEN_EXPIRY=15m

# Refresh token expiration (e.g., 7d, 30d)
JWT_REFRESH_TOKEN_EXPIRY=7d

# Cookie configuration
COOKIE_DOMAIN=localhost
COOKIE_SECURE=false  # Set to true in production (HTTPS required)

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# Monitoring (Optional)
# ============================================
SENTRY_DSN=
OPENTELEMETRY_ENDPOINT=
